{"version":3,"sources":["state/index.js","state/auth/actions.js","state/auth/reducers.js","state/reducers.js","routes/private-route.js","state/auth/hooks/auth.js","views/login/index.js","views/styles/StyledCard.js","views/home/elements/Card.js","views/styles/StyledGetCodeBtn.js","views/home/elements/GetCodeBtn.js","views/styles/StyledTitle.js","views/home/elements/Title.js","views/styles/StyledHome.js","config.js","state/card/hooks/codeFetch.js","state/customer/hooks/useCustomerFetch.js","views/home/index.js","App.js","serviceWorker.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","LOGIN","LOGOUT","expiredTimeStamp","window","localStorage","getItem","INITIAL_STATE","authenticated","Date","getTime","profile","state","action","type","payload","auth","authReducer","PrivateRoute","Component","component","rest","render","props","to","pathname","from","location","useAuth","dispatch","lock","Auth0Lock","audience","on","authResult","expiresIn","setItem","accessToken","hide","signIn","show","siginOut","a","logout","getUserProfile","getUserInfo","error","setUserProfile","Login","useEffect","history","push","StyledCard","styled","div","Card","className","StyledGetCodeBtn","button","GetCodeBtn","text","callback","onClick","StyledTitle","Title","StyledHome","config","CORE_SERVICE_ENDPOINT","process","useCodeFetch","useState","codeUrl","setCodeUrl","loading","setLoading","setError","setAfterPurchaseData","socketEnpoint","socket","socketIOClient","customerEmail","email","data","console","log","method","fetch","headers","ContentType","Authorization","response","result","useCustomerFetch","customerDetail","setCustomerDetail","customerDetailChecked","setDetailChecked","profileLoading","setProfileLoading","dataError","setDataError","fetchCustomerDetails","ok","json","createCustomer","username","body","JSON","stringify","Home","fetchCode","App","AUTH_INITIAL_STATE","reducers","basename","exact","path","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.e2f51072.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\n\nexport const StateContext = createContext();\n\nexport const StateProvider = ({ reducer, initialState, children }) => (\n  <StateContext.Provider value={useReducer(reducer, initialState)}>\n    {children}\n  </StateContext.Provider>\n);\n\nexport const useStateValue = () => useContext(StateContext);\n","export const LOGIN = 'auth/LOGIN';\nexport const LOGOUT = 'auth/CLEAR_USER';\nexport const SETUSERPORFILE = 'auth/SET_USER_PROFILE';\nexport const login = () => ({\n  type: LOGIN,\n});\n\nexport const logout = () => ({\n  type: LOGOUT,\n});\n\nexport const setUserProfile = (profile) => ({\n  type: SETUSERPORFILE,\n  payload: profile,\n});\n","import { LOGIN, LOGOUT, SETUSERPORFILE } from './actions';\n\nconst expiredTimeStamp = window.localStorage.getItem('auth0ExpiresIn');\nexport const INITIAL_STATE = {\n  authenticated:\n    expiredTimeStamp && expiredTimeStamp - new Date().getTime() / 1000 > 0,\n  profile: null,\n};\nexport default (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case LOGIN:\n      return {\n        ...state,\n        authenticated: true,\n      };\n\n    case LOGOUT:\n      return {\n        ...INITIAL_STATE,\n      };\n    case SETUSERPORFILE:\n      return {\n        ...state,\n        profile: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n","import authReducer from './auth/reducers';\n\nexport default ({ auth }, action) => ({\n  auth: authReducer(auth, action),\n});\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nimport { useStateValue } from '../state';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  const [{ auth }] = useStateValue();\n\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        auth.authenticated ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to={{ pathname: '/', state: { from: props.location } }} />\n        )\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import { useStateValue } from '../../index';\nimport { login, setUserProfile } from '../actions';\nimport Auth0Lock from 'auth0-lock';\nconst useAuth = () => {\n  const [{ auth }, dispatch] = useStateValue();\n\n  var lock = new Auth0Lock(\n    '4sh93YHeF9hWItsRv9qHQH31tudFKDpY',\n    'dev-l7c1wrq9.au.auth0.com',\n    {\n      auth: {\n        audience: 'https://localhost:5000',\n      },\n    }\n  );\n\n  lock.on('authenticated', function (authResult) {\n    // Use the token in authResult to getUserInfo() and save it if necessary\n    let expiredTimeStamp = new Date().getTime() / 1000 + authResult.expiresIn;\n    window.localStorage.setItem('auth0ExpiresIn', expiredTimeStamp);\n    window.localStorage.setItem('auth0AccessToken', authResult.accessToken);\n    lock.hide();\n    dispatch(login());\n  });\n  const getUserProfile = () => {\n    let accessToken = window.localStorage.getItem('auth0AccessToken');\n    lock.getUserInfo(accessToken, function (error, profile) {\n      dispatch(setUserProfile(profile));\n    });\n  };\n\n  const signIn = () => {\n    lock.show();\n  };\n\n  const siginOut = async () => {\n    // either with async/await\n\n    lock.logout();\n  };\n  return [auth, { signIn, siginOut, getUserProfile }];\n};\n\nexport default useAuth;\n","import React from 'react';\nimport { useEffect } from 'react';\n\nimport useAuth from '../../state/auth/hooks/auth';\nconst Login = (props) => {\n  const { from } = props.location.state || { from: { pathname: '/home' } };\n\n  const [auth, { signIn }] = useAuth();\n  // const [auth, { signIn, siginOut, getUserProfile }] = useAuth();\n\n  useEffect(() => {\n    if (auth.authenticated) {\n      props.history.push(from);\n    } else {\n      signIn();\n    }\n  }, [auth]);\n\n  return <div></div>;\n};\n\nexport default Login;\n","import styled from 'styled-components';\n\nconst StyledCard = styled.div`\n  display: flex;\n  justify-content: center;\n  margin: auto;\n  margin-top: 50px;\n  flex-direction: column;\n  width: 60%;\n  padding: 10px;\n  height: fit-content;\n\n  .coffee-card_row {\n    width: 100%;\n    display: flex;\n    justify-content: space-around;\n    margin: 15px;\n  }\n  .coffee-card_item {\n    font-size: 35px;\n    color: white;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n  .coffee-card_item_even {\n    font-size: 35px;\n    color: #f08080;\n    margin-left: 10px;\n    margin-right: 10px;\n  }\n`;\n\nexport default StyledCard;\n","import React from 'react';\nimport StyledCard from './../../styles/StyledCard';\n\nconst Card = () => (\n  <StyledCard>\n    <div className=\"coffee-card_row\">\n      <div className=\"coffee-card_item_even\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item_even\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item_even\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item_even\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item_even\">\n        <i className=\"fa fa-heart\"></i>\n      </div>\n    </div>\n    <div className=\"coffee-card_row\">\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-heart\"></i>\n      </div>\n    </div>\n    <div className=\"coffee-card_row\">\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-heart\"></i>\n      </div>\n    </div>\n    <div className=\"coffee-card_row\">\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-coffee\"></i>\n      </div>\n      <div className=\"coffee-card_item\">\n        <i className=\"fa fa-heart\"></i>\n      </div>\n    </div>\n  </StyledCard>\n);\nexport default Card;\n","import styled from 'styled-components';\n\nconst StyledGetCodeBtn = styled.button`\n  background-color: #b33939;\n  width: 90%;\n  max-width: 500px;\n  border: none;\n  color: white;\n  padding: 15px 32px;\n  text-align: center;\n  text-decoration: none;\n  display: block;\n  font-size: 25px;\n  font-weight: bold;\n  border-radius: 10px;\n  position: fixed;\n  margin: auto;\n  bottom: 150px;\n  cursor: pointer;\n\n  i {\n    margin-right: 10px;\n    font-size: 25px;\n  }\n`;\n\nexport default StyledGetCodeBtn;\n","import React from 'react';\nimport StyledGetCodeBtn from './../../styles/StyledGetCodeBtn';\n\nconst GetCodeBtn = ({ text, callback }) => (\n  <StyledGetCodeBtn type=\"button\" onClick={callback}>\n    <i className=\"fa fa-qrcode\"></i>\n    {text}\n  </StyledGetCodeBtn>\n);\n\nexport default GetCodeBtn;\n","import styled from 'styled-components';\n\nconst StyledTitle = styled.div`\n  display: flex;\n  justify-content: center;\n  margin: auto;\n  margin-top: 80px;\n  font-weight: bold;\n  font-size: 35px;\n  font-family: fantasy;\n`;\n\nexport default StyledTitle;\n","import React from 'react';\nimport StyledTitle from './../../styles/StyledTitle';\n\nconst Title = ({ text }) => <StyledTitle>{text}</StyledTitle>;\n\nexport default Title;\n","import styled from 'styled-components';\n\nconst StyledHome = styled.div`\n  background-color: #c7ecee;\n  width: 100%;\n  display: block;\n  max-width: 500px;\n  margin: 0 auto;\n  padding-top: 20px;\n  text-align: center;\n  height: 100vh;\n`;\n\nexport default StyledHome;\n","const config = {\n    CORE_SERVICE_ENDPOINT : process.env.REACT_APP_CORE_SERVICE_ENDPOINT\n} \n\nexport default config;\n","import { useState } from 'react';\nimport { useStateValue } from '../../index';\nimport socketIOClient from 'socket.io-client';\nimport config from '../../../config';\n\nconst useCodeFetch = () => {\n  const [codeUrl, setCodeUrl] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [afterPurchaseData, setAfterPurchaseData] = useState(null);\n\n  const [{ auth }] = useStateValue();\n  const socketEnpoint = config.CORE_SERVICE_ENDPOINT;\n  const socket = socketIOClient(socketEnpoint);\n  let customerEmail = auth.profile && auth.profile.email;\n  socket.on(`FromAPI-${customerEmail}`, (data) => {\n    console.log(data);\n    setAfterPurchaseData(data);\n  });\n\n  const fetchCode = async (method) => {\n    setLoading(true);\n    const accessToken = window.localStorage.getItem('accessToken');\n    try {\n      const response = await fetch(\n        `${config.CORE_SERVICE_ENDPOINT}/api/code/get-code`,\n        {\n          method: 'GET',\n          headers: {\n            ContentType: 'application/json',\n            Authorization: 'Bearer ' + accessToken,\n          },\n        }\n      );\n      const result = await response.text();\n      let customerEmail = auth.profile && auth.profile.email;\n      setCodeUrl(`${result}&email=${customerEmail}&method=${method}`);\n    } catch (error) {\n      setError(error);\n    }\n    setLoading(false);\n  };\n\n  return [{ codeUrl, loading, error }, fetchCode];\n};\n\nexport default useCodeFetch;\n","import { useState } from 'react';\nimport config from '../../../config';\n\nconst useCustomerFetch = () => {\n  const [customerDetail, setCustomerDetail] = useState(null);\n  const [customerDetailChecked, setDetailChecked] = useState(false);\n  const [profileLoading, setProfileLoading] = useState(false);\n  const [dataError, setDataError] = useState(false);\n\n  const fetchCustomerDetails = async (email) => {\n    setProfileLoading(true);\n    setDetailChecked(false);\n    const accessToken = window.localStorage.getItem('accessToken');\n    try {\n      const response = await fetch(\n        `${config.CORE_SERVICE_ENDPOINT}/api/customers/get?email=${email}`,\n        {\n          method: 'GET',\n        }\n      );\n      if (response.ok) {\n        const result = await response.json();\n        setCustomerDetail(result);\n      }\n    } catch (dataError) {\n      setDataError(true);\n    }\n    setProfileLoading(false);\n    setDetailChecked(true);\n  };\n\n  const createCustomer = async (username, email) => {\n    setProfileLoading(true);\n    const accessToken = window.localStorage.getItem('accessToken');\n    try {\n      const response = await fetch(`${config.CORE_SERVICE_ENDPOINT}/api/customers/`, {\n        method: 'POST',\n        body: JSON.stringify({\n          username: username,\n          email: email,\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n      const result = await response.json();\n\n      setCustomerDetail(result);\n    } catch (dataError) {\n      setDataError(true);\n    }\n    setProfileLoading(false);\n  };\n\n  return [\n    { customerDetail, customerDetailChecked, profileLoading, dataError },\n    { fetchCustomerDetails, createCustomer },\n  ];\n};\n\nexport default useCustomerFetch;\n","import React, { useEffect } from 'react';\nimport Card from './elements/Card';\nimport GetCodeBtn from './elements/GetCodeBtn';\nimport Title from './elements/Title';\nimport StyledHome from '../styles/StyledHome';\nimport useAuth from '../../state/auth/hooks/auth';\nimport useCodeFetch from '../../state/card/hooks/codeFetch';\nimport useCustomerFetch from '../../state/customer/hooks/useCustomerFetch';\nimport QRCode from 'qrcode.react';\n\nconst Home = (props) => {\n  const [{ codeUrl, loading, error }, fetchCode] = useCodeFetch();\n  const [\n    { customerDetail, customerDetailChecked, profileLoading, dataError },\n    { fetchCustomerDetails, createCustomer },\n  ] = useCustomerFetch();\n  const [auth, { signIn, siginOut, getUserProfile }] = useAuth();\n  useEffect(() => {\n    console.log(JSON.stringify(auth.profile));\n    if (!auth.profile) {\n      getUserProfile();\n    }\n    if (auth.profile && !customerDetail) {\n      console.log(JSON.stringify(auth.profile));\n      if (customerDetailChecked) {\n        createCustomer(auth.profile.username, auth.profile.email);\n      } else {\n        fetchCustomerDetails(auth.profile.email);\n      }\n    }\n  }, [codeUrl, auth.profile, customerDetailChecked, customerDetail]);\n\n  return (\n    <StyledHome>\n      <Title text=\"CAFE NAME\" />\n      <Card />\n      <GetCodeBtn text=\"GET CODE\" callback={() => fetchCode('purchase')} />\n      {codeUrl && <QRCode value={codeUrl} />}\n    </StyledHome>\n  );\n};\nexport default Home;\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { StateProvider } from './state';\nimport { INITIAL_STATE as AUTH_INITIAL_STATE } from './state/auth/reducers';\nimport reducers from './state/reducers';\nimport PrivateRoute from './routes/private-route';\nimport Login from './views/login';\nimport Home from './views/home';\n\nconst App = (props) => {\n  const initialState = {\n    auth: AUTH_INITIAL_STATE,\n  };\n  return (\n    <StateProvider initialState={initialState} reducer={reducers}>\n      <Router basename='/mobile-pwa'>\n        <Switch>\n          <Route exact path=\"/\" component={Login} />\n          <PrivateRoute path=\"/home\" component={Home} />\n        </Switch>\n      </Router>\n    </StateProvider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}