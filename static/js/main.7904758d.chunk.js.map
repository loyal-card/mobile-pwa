{"version":3,"sources":["state/index.js","state/auth/actions.js","state/auth/reducers.js","state/reducers.js","routes/private-route.js","state/auth/hooks/auth.js","views/login/index.js","views/styles/StyledCard.js","views/home/elements/Card.js","views/styles/StyledGetCodeBtn.js","views/home/elements/GetCodeBtn.js","views/styles/StyledTitle.js","views/home/elements/Title.js","views/styles/StyledHome.js","config.js","state/card/hooks/codeFetch.js","state/customer/hooks/useCustomerFetch.js","views/home/index.js","App.js","serviceWorker.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","LOGIN","LOGOUT","expiredTimeStamp","window","localStorage","getItem","INITIAL_STATE","authenticated","Date","getTime","profile","state","action","type","payload","auth","authReducer","PrivateRoute","Component","component","rest","render","props","to","pathname","from","location","useAuth","dispatch","lock","Auth0Lock","audience","on","authResult","expiresIn","setItem","accessToken","hide","signIn","show","siginOut","a","logout","getUserProfile","getUserInfo","error","setUserProfile","Login","useEffect","history","push","StyledCard","styled","div","Card","className","StyledGetCodeBtn","button","GetCodeBtn","text","callback","onClick","StyledTitle","Title","StyledHome","config","CORE_SERVICE_ENDPOINT","process","useCodeFetch","useState","codeUrl","setCodeUrl","loading","setLoading","setError","setAfterPurchaseData","socketEnpoint","socket","socketIOClient","customerEmail","email","data","console","log","method","fetch","headers","ContentType","Authorization","response","result","useCustomerFetch","customerDetail","setCustomerDetail","customerDetailChecked","setDetailChecked","profileLoading","setProfileLoading","dataError","setDataError","fetchCustomerDetails","ok","json","createCustomer","username","body","JSON","stringify","Home","fetchCode","App","AUTH_INITIAL_STATE","reducers","basename","exact","path","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.7904758d.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\r\n\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({ reducer, initialState, children }) => (\r\n  <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n    {children}\r\n  </StateContext.Provider>\r\n);\r\n\r\nexport const useStateValue = () => useContext(StateContext);\r\n","export const LOGIN = 'auth/LOGIN';\r\nexport const LOGOUT = 'auth/CLEAR_USER';\r\nexport const SETUSERPORFILE = 'auth/SET_USER_PROFILE';\r\nexport const login = () => ({\r\n  type: LOGIN,\r\n});\r\n\r\nexport const logout = () => ({\r\n  type: LOGOUT,\r\n});\r\n\r\nexport const setUserProfile = (profile) => ({\r\n  type: SETUSERPORFILE,\r\n  payload: profile,\r\n});\r\n","import { LOGIN, LOGOUT, SETUSERPORFILE } from './actions';\r\n\r\nconst expiredTimeStamp = window.localStorage.getItem('auth0ExpiresIn');\r\nexport const INITIAL_STATE = {\r\n  authenticated:\r\n    expiredTimeStamp && expiredTimeStamp - new Date().getTime() / 1000 > 0,\r\n  profile: null,\r\n};\r\nexport default (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case LOGIN:\r\n      return {\r\n        ...state,\r\n        authenticated: true,\r\n      };\r\n\r\n    case LOGOUT:\r\n      return {\r\n        ...INITIAL_STATE,\r\n      };\r\n    case SETUSERPORFILE:\r\n      return {\r\n        ...state,\r\n        profile: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import authReducer from './auth/reducers';\r\n\r\nexport default ({ auth }, action) => ({\r\n  auth: authReducer(auth, action),\r\n});\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport { useStateValue } from '../state';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const [{ auth }] = useStateValue();\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        auth.authenticated ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import { useStateValue } from '../../index';\r\nimport { login, setUserProfile } from '../actions';\r\nimport Auth0Lock from 'auth0-lock';\r\nconst useAuth = () => {\r\n  const [{ auth }, dispatch] = useStateValue();\r\n\r\n  var lock = new Auth0Lock(\r\n    '4sh93YHeF9hWItsRv9qHQH31tudFKDpY',\r\n    'dev-l7c1wrq9.au.auth0.com',\r\n    {\r\n      auth: {\r\n        audience: 'https://localhost:5000',\r\n      },\r\n    }\r\n  );\r\n\r\n  lock.on('authenticated', function (authResult) {\r\n    // Use the token in authResult to getUserInfo() and save it if necessary\r\n    let expiredTimeStamp = new Date().getTime() / 1000 + authResult.expiresIn;\r\n    window.localStorage.setItem('auth0ExpiresIn', expiredTimeStamp);\r\n    window.localStorage.setItem('auth0AccessToken', authResult.accessToken);\r\n    lock.hide();\r\n    dispatch(login());\r\n  });\r\n  const getUserProfile = () => {\r\n    let accessToken = window.localStorage.getItem('auth0AccessToken');\r\n    lock.getUserInfo(accessToken, function (error, profile) {\r\n      dispatch(setUserProfile(profile));\r\n    });\r\n  };\r\n\r\n  const signIn = () => {\r\n    lock.show();\r\n  };\r\n\r\n  const siginOut = async () => {\r\n    // either with async/await\r\n\r\n    lock.logout();\r\n  };\r\n  return [auth, { signIn, siginOut, getUserProfile }];\r\n};\r\n\r\nexport default useAuth;\r\n","import React from 'react';\r\nimport { useEffect } from 'react';\r\n\r\nimport useAuth from '../../state/auth/hooks/auth';\r\nconst Login = (props) => {\r\n  const { from } = props.location.state || { from: { pathname: '/home' } };\r\n\r\n  const [auth, { signIn }] = useAuth();\r\n  // const [auth, { signIn, siginOut, getUserProfile }] = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (auth.authenticated) {\r\n      props.history.push(from);\r\n    } else {\r\n      signIn();\r\n    }\r\n  }, [auth]);\r\n\r\n  return <div></div>;\r\n};\r\n\r\nexport default Login;\r\n","import styled from 'styled-components';\r\n\r\nconst StyledCard = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: auto;\r\n  margin-top: 50px;\r\n  flex-direction: column;\r\n  width: 60%;\r\n  padding: 10px;\r\n  height: fit-content;\r\n\r\n  .coffee-card_row {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    margin: 15px;\r\n  }\r\n  .coffee-card_item {\r\n    font-size: 35px;\r\n    color: white;\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n  }\r\n  .coffee-card_item_even {\r\n    font-size: 35px;\r\n    color: #f08080;\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n  }\r\n`;\r\n\r\nexport default StyledCard;\r\n","import React from 'react';\r\nimport StyledCard from './../../styles/StyledCard';\r\n\r\nconst Card = () => (\r\n  <StyledCard>\r\n    <div className=\"coffee-card_row\">\r\n      <div className=\"coffee-card_item_even\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item_even\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item_even\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item_even\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item_even\">\r\n        <i className=\"fa fa-heart\"></i>\r\n      </div>\r\n    </div>\r\n    <div className=\"coffee-card_row\">\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-heart\"></i>\r\n      </div>\r\n    </div>\r\n    <div className=\"coffee-card_row\">\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-heart\"></i>\r\n      </div>\r\n    </div>\r\n    <div className=\"coffee-card_row\">\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-coffee\"></i>\r\n      </div>\r\n      <div className=\"coffee-card_item\">\r\n        <i className=\"fa fa-heart\"></i>\r\n      </div>\r\n    </div>\r\n  </StyledCard>\r\n);\r\nexport default Card;\r\n","import styled from 'styled-components';\r\n\r\nconst StyledGetCodeBtn = styled.button`\r\n  background-color: #b33939;\r\n  width: 90%;\r\n  max-width: 500px;\r\n  border: none;\r\n  color: white;\r\n  padding: 15px 32px;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: block;\r\n  font-size: 25px;\r\n  font-weight: bold;\r\n  border-radius: 10px;\r\n  position: fixed;\r\n  margin: auto;\r\n  bottom: 150px;\r\n  cursor: pointer;\r\n\r\n  i {\r\n    margin-right: 10px;\r\n    font-size: 25px;\r\n  }\r\n`;\r\n\r\nexport default StyledGetCodeBtn;\r\n","import React from 'react';\r\nimport StyledGetCodeBtn from './../../styles/StyledGetCodeBtn';\r\n\r\nconst GetCodeBtn = ({ text, callback }) => (\r\n  <StyledGetCodeBtn type=\"button\" onClick={callback}>\r\n    <i className=\"fa fa-qrcode\"></i>\r\n    {text}\r\n  </StyledGetCodeBtn>\r\n);\r\n\r\nexport default GetCodeBtn;\r\n","import styled from 'styled-components';\r\n\r\nconst StyledTitle = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: auto;\r\n  margin-top: 80px;\r\n  font-weight: bold;\r\n  font-size: 35px;\r\n  font-family: fantasy;\r\n`;\r\n\r\nexport default StyledTitle;\r\n","import React from 'react';\r\nimport StyledTitle from './../../styles/StyledTitle';\r\n\r\nconst Title = ({ text }) => <StyledTitle>{text}</StyledTitle>;\r\n\r\nexport default Title;\r\n","import styled from 'styled-components';\r\n\r\nconst StyledHome = styled.div`\r\n  background-color: #c7ecee;\r\n  width: 100%;\r\n  display: block;\r\n  max-width: 500px;\r\n  margin: 0 auto;\r\n  padding-top: 20px;\r\n  text-align: center;\r\n  height: 100vh;\r\n`;\r\n\r\nexport default StyledHome;\r\n","const config = {\r\n    CORE_SERVICE_ENDPOINT : process.env.REACT_APP_CORE_SERVICE_ENDPOINT\r\n} \r\n\r\nexport default config;\r\n","import { useState } from 'react';\r\nimport { useStateValue } from '../../index';\r\nimport socketIOClient from 'socket.io-client';\r\nimport config from '../../../config';\r\n\r\nconst useCodeFetch = () => {\r\n  const [codeUrl, setCodeUrl] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const [afterPurchaseData, setAfterPurchaseData] = useState(null);\r\n\r\n  const [{ auth }] = useStateValue();\r\n  const socketEnpoint = config.CORE_SERVICE_ENDPOINT;\r\n  const socket = socketIOClient(socketEnpoint);\r\n  let customerEmail = auth.profile && auth.profile.email;\r\n  socket.on(`FromAPI-${customerEmail}`, (data) => {\r\n    console.log(data);\r\n    setAfterPurchaseData(data);\r\n  });\r\n\r\n  const fetchCode = async (method) => {\r\n    setLoading(true);\r\n    const accessToken = window.localStorage.getItem('accessToken');\r\n    try {\r\n      const response = await fetch(\r\n        `${config.CORE_SERVICE_ENDPOINT}/api/code/get-code`,\r\n        {\r\n          method: 'GET',\r\n          headers: {\r\n            ContentType: 'application/json',\r\n            Authorization: 'Bearer ' + accessToken,\r\n          },\r\n        }\r\n      );\r\n      const result = await response.text();\r\n      let customerEmail = auth.profile && auth.profile.email;\r\n      setCodeUrl(`${result}&email=${customerEmail}&method=${method}`);\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return [{ codeUrl, loading, error }, fetchCode];\r\n};\r\n\r\nexport default useCodeFetch;\r\n","import { useState } from 'react';\r\nimport config from '../../../config';\r\n\r\nconst useCustomerFetch = () => {\r\n  const [customerDetail, setCustomerDetail] = useState(null);\r\n  const [customerDetailChecked, setDetailChecked] = useState(false);\r\n  const [profileLoading, setProfileLoading] = useState(false);\r\n  const [dataError, setDataError] = useState(false);\r\n\r\n  const fetchCustomerDetails = async (email) => {\r\n    setProfileLoading(true);\r\n    setDetailChecked(false);\r\n    const accessToken = window.localStorage.getItem('accessToken');\r\n    try {\r\n      const response = await fetch(\r\n        `${config.CORE_SERVICE_ENDPOINT}/api/customers/get?email=${email}`,\r\n        {\r\n          method: 'GET',\r\n        }\r\n      );\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setCustomerDetail(result);\r\n      }\r\n    } catch (dataError) {\r\n      setDataError(true);\r\n    }\r\n    setProfileLoading(false);\r\n    setDetailChecked(true);\r\n  };\r\n\r\n  const createCustomer = async (username, email) => {\r\n    setProfileLoading(true);\r\n    const accessToken = window.localStorage.getItem('accessToken');\r\n    try {\r\n      const response = await fetch(`${config.CORE_SERVICE_ENDPOINT}/api/customers/`, {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          username: username,\r\n          email: email,\r\n        }),\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      const result = await response.json();\r\n\r\n      setCustomerDetail(result);\r\n    } catch (dataError) {\r\n      setDataError(true);\r\n    }\r\n    setProfileLoading(false);\r\n  };\r\n\r\n  return [\r\n    { customerDetail, customerDetailChecked, profileLoading, dataError },\r\n    { fetchCustomerDetails, createCustomer },\r\n  ];\r\n};\r\n\r\nexport default useCustomerFetch;\r\n","import React, { useEffect } from 'react';\r\nimport Card from './elements/Card';\r\nimport GetCodeBtn from './elements/GetCodeBtn';\r\nimport Title from './elements/Title';\r\nimport StyledHome from '../styles/StyledHome';\r\nimport useAuth from '../../state/auth/hooks/auth';\r\nimport useCodeFetch from '../../state/card/hooks/codeFetch';\r\nimport useCustomerFetch from '../../state/customer/hooks/useCustomerFetch';\r\nimport QRCode from 'qrcode.react';\r\n\r\nconst Home = (props) => {\r\n  const [{ codeUrl, loading, error }, fetchCode] = useCodeFetch();\r\n  const [\r\n    { customerDetail, customerDetailChecked, profileLoading, dataError },\r\n    { fetchCustomerDetails, createCustomer },\r\n  ] = useCustomerFetch();\r\n  const [auth, { signIn, siginOut, getUserProfile }] = useAuth();\r\n  useEffect(() => {\r\n    console.log(JSON.stringify(auth.profile));\r\n    if (!auth.profile) {\r\n      getUserProfile();\r\n    }\r\n    if (auth.profile && !customerDetail) {\r\n      console.log(JSON.stringify(auth.profile));\r\n      if (customerDetailChecked) {\r\n        createCustomer(auth.profile.username, auth.profile.email);\r\n      } else {\r\n        fetchCustomerDetails(auth.profile.email);\r\n      }\r\n    }\r\n  }, [codeUrl, auth.profile, customerDetailChecked, customerDetail]);\r\n\r\n  return (\r\n    <StyledHome>\r\n      <Title text=\"CAFE NAME\" />\r\n      <Card />\r\n      <GetCodeBtn text=\"GET CODE\" callback={() => fetchCode('purchase')} />\r\n      {codeUrl && <QRCode value={codeUrl} />}\r\n    </StyledHome>\r\n  );\r\n};\r\nexport default Home;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport { StateProvider } from './state';\r\nimport { INITIAL_STATE as AUTH_INITIAL_STATE } from './state/auth/reducers';\r\nimport reducers from './state/reducers';\r\nimport PrivateRoute from './routes/private-route';\r\nimport Login from './views/login';\r\nimport Home from './views/home';\r\n\r\nconst App = (props) => {\r\n  const initialState = {\r\n    auth: AUTH_INITIAL_STATE,\r\n  };\r\n  return (\r\n    <StateProvider initialState={initialState} reducer={reducers}>\r\n      <Router basename='/mobile-pwa'>\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Login} />\r\n          <PrivateRoute path=\"/home\" component={Home} />\r\n        </Switch>\r\n      </Router>\r\n    </StateProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}